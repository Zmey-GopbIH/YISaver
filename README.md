# Video Downloader Telegram Bot

Бот для скачивания видео из Instagram, YouTube и TikTok с возможностью отправки в чат или сохранения на сервере.

## 📋 Функционал

### Для пользователей:
- 📥 Скачивание видео из Instagram (Reels, посты, IGTV)
- 📥 Скачивание видео из YouTube (обычные видео, Shorts)
- 📥 Скачивание видео из TikTok
- ⚙️ Настройка максимального размера видео для сервера
- ⏰ Настройка времени жизни ссылок
- 📤 Автоматическая отправка видео ≤50MB в чат Telegram
- 🔗 Генерация временных ссылок для видео >50MB

### Для администратора (/admin):
- 📊 Статистика сервера (занятое/свободное место)
- 📁 Просмотр всех загруженных видео
- 🗑️ Очистка старых файлов (старше 10 минут)
- 🔗 Получение ссылок на все видео
- ⚙️ Выборочное удаление файлов
- 📋 Системная информация

## 🚀 Быстрый старт

### 1. Установка зависимостей
```bash
pip install -r requirements.txt
```
### 2. Настройка бота
Получите токен бота у @BotFather

Отредактируйте config.py:

Замените YOUR_BOT_TOKEN_HERE на ваш токен

Замените ADMIN_IDS = [123456789] на ваш Telegram ID

### 3. Установите FFmpeg
```bash
# Ubuntu/Debian
sudo apt install ffmpeg

# macOS
brew install ffmpeg

# Windows: скачайте с https://ffmpeg.org/
```
### 4. Запуск
```bash
python main.py
```
### ⚙️ Настройки окружения
Создайте файл .env (необязательно):

```env
TELEGRAM_TOKEN=ваш_токен
FILE_SERVER_HOST=0.0.0.0
FILE_SERVER_PORT=8000
FILE_SERVER_URL=http://ваш_домен:8000
```
### 📁 Структура проекта
```text
telegram_video_bot/
├── main.py              # Главный файл запуска
├── config.py            # Конфигурация
├── requirements.txt     # Зависимости
├── README.md           # Документация
├── .gitignore          # Git ignore
├── temp/               # Временные файлы
│   ├── downloads/      # Временные загрузки
│   └── videos/         # Постоянное хранилище видео
└── bot/                # Модули бота
    ├── __init__.py
    ├── handlers.py     # Обработчики команд
    ├── downloader.py   # Загрузчик видео
    ├── file_server.py  # Файловый сервер
    └── utils.py        # Утилиты
    ```
###🔧 Команды бота

**Основные команды:**
/start - начало работы

/help - справка

/settings - настройки размера видео и времени жизни ссылок

**Команды администратора:**
/admin - панель администратора

/cleanup - очистка устаревших файлов

###🌐 Файловый сервер
Бот запускает встроенный файловый сервер для предоставления доступа к большим видеофайлам:

Адрес: http://localhost:8000 (по умолчанию)

Эндпоинты:

/download/{link_id} - скачивание файла

/info/{link_id} - информация о ссылке

/cleanup - очистка устаревших ссылок (админ)

### ⚠️ Ограничения
Telegram: Максимальный размер видео - 50MB

Сервер: Настраивается в /settings (по умолчанию 500MB)

Время жизни ссылок: Настраивается в /settings (по умолчанию 60 минут)

Файлы: Автоматически удаляются при истечении срока ссылки

### 🔒 Безопасность
Администратор: Только указанные в config.py пользователи имеют доступ к /admin

Ссылки: Генерируются с ограниченным временем жизни

Файлы: Хранятся в защищённой директории temp/videos/

### 🐛 Устранение неполадок
Проблема: "ModuleNotFoundError: No module named '...'"
```bash
pip install -r requirements.txt
```
Проблема: "Bot не отвечает"
Проверьте токен бота в config.py

Убедитесь, что бот запущен (python main.py)

Проверьте логи ошибок

Проблема: "Не скачивается видео"
Проверьте интернет-соединение

Убедитесь, что видео публичное

Попробуйте другое видео

### 📝 Лицензия
Этот проект распространяется под лицензией MIT. Подробнее см. в файле LICENSE.